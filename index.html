<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategic Partner Scout | Senior Partner Dashboard</title>
    <style>
        /* KEEPING YOUR ELITE STYLING */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1629 100%);
            min-height: 100vh;
            color: #e0e7ff;
            padding: 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 50px; padding-top: 40px; }
        .header h1 {
            font-size: 2.5rem; font-weight: 700;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 10px; letter-spacing: -1px;
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 10px; color: #60a5fa; font-size: 0.8rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; }
        input, textarea {
            width: 100%; padding: 15px; background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 12px;
            color: #fff; font-size: 1rem;
        }
        .btn-analyze {
            width: 100%; padding: 18px;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            border: none; border-radius: 12px; color: white;
            font-weight: 700; cursor: pointer; text-transform: uppercase;
        }
        /* NEW RFI BOX STYLING */
        #rfi-box {
            display: none; background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6; border-radius: 12px; padding: 20px; margin-top: 20px;
        }
        .result-section { margin-top: 30px; border-top: 1px solid rgba(255,255,255,0.1); pt: 20px; }
        .result-section h3 { color: #60a5fa; margin-bottom: 10px; font-size: 0.9rem; text-transform: uppercase; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Strategic Partner Scout</h1>
            <p>Institutional Intelligence Engine v2.0</p>
        </div>

        <div class="glass-panel">
            <div class="form-group">
                <label>Target Company URL</label>
                <input type="text" id="companyUrl" placeholder="https://spacex.com">
            </div>

            <div id="rfi-box">
                <label id="rfi-label" style="color:#a78bfa; font-size: 0.8rem; font-weight: 800;">CLARIFICATION REQUIRED</label>
                <p id="rfi-question" style="margin: 10px 0; font-style: italic; color: #fff;"></p>
                <textarea id="additionalInfo" placeholder="Provide the missing context here..."></textarea>
            </div>

            <button class="btn-analyze" id="analyzeBtn" onclick="executeIntelligence()">Initiate Intelligence Sweep</button>
        </div>

        <div id="results" class="glass-panel hidden">
            <div class="result-section">
                <h3>Structural Gorge</h3>
                <p id="out-gorge" style="line-height: 1.6; color: #cbd5e1;"></p>
            </div>
            <div class="result-section">
                <h3>Arbitrage Hunter</h3>
                <p id="out-arbitrage" style="line-height: 1.6; color: #cbd5e1;"></p>
            </div>
            <div class="result-section">
                <h3>Strategic Assessment</h3>
                <p id="out-assessment" style="line-height: 1.6; color: #cbd5e1;"></p>
            </div>
        </div>
    </div>

    <script>
        async function executeIntelligence() {
            const btn = document.getElementById('analyzeBtn');
            const url = document.getElementById('companyUrl').value;
            const extra = document.getElementById('additionalInfo').value;
            
            btn.innerText = "Analyzing Market Positioning...";
            btn.disabled = true;

            try {
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ companyUrl: url, additionalInfo: extra })
                });

                const data = await response.json();

                if (data.status === "needs_info") {
                    document.getElementById('rfi-question').innerText = data.clarifyingQuestion;
                    document.getElementById('rfi-box').style.display = 'block';
                    btn.innerText = "Submit Clarification";
                    btn.disabled = false;
                } else {
                    document.getElementById('rfi-box').style.display = 'none';
                    document.getElementById('results').classList.remove('hidden');
                    document.getElementById('out-gorge').innerText = data.structuralGorge;
                    document.getElementById('out-arbitrage').innerText = data.arbitrageHunter;
                    document.getElementById('out-assessment').innerText = data.strategicAssessment;
                    btn.innerText = "Analysis Complete";
                }
            } catch (err) {
                alert("Intelligence failure. Check connection.");
                btn.disabled = false;
                btn.innerText = "Re-Initiate Sweep";
            }
        }
    </script>
</body>
</html>
