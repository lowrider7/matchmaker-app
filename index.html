<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategic Partner Scout | V5.1</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
            color: #e4e4e7;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 2px solid #2d2d44;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .version {
            color: #a1a1aa;
            font-size: 0.9rem;
            letter-spacing: 2px;
        }

        .input-section {
            background: rgba(45, 45, 68, 0.4);
            border: 1px solid #3f3f5e;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #e4e4e7;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        input[type="url"],
        textarea,
        select {
            width: 100%;
            padding: 14px 18px;
            background: #1a1a2e;
            border: 1px solid #3f3f5e;
            border-radius: 8px;
            color: #e4e4e7;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="url"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #60a5fa;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .tier-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .tier-option {
            background: #1a1a2e;
            border: 2px solid #3f3f5e;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tier-option:hover {
            border-color: #60a5fa;
            transform: translateY(-2px);
        }

        .tier-option.selected {
            border-color: #60a5fa;
            background: rgba(96, 165, 250, 0.1);
        }

        .tier-option input[type="radio"] {
            display: none;
        }

        .tier-name {
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 5px;
        }

        .tier-desc {
            font-size: 0.85rem;
            color: #a1a1aa;
        }

        button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(96, 165, 250, 0.3);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .output-section {
            background: rgba(45, 45, 68, 0.4);
            border: 1px solid #3f3f5e;
            border-radius: 12px;
            padding: 30px;
            backdrop-filter: blur(10px);
            display: none;
        }

        .output-section.visible {
            display: block;
        }

        .output-content {
            background: #1a1a2e;
            border-radius: 8px;
            padding: 25px;
            color: #e4e4e7;
            line-height: 1.8;
            white-space: pre-wrap;
            max-height: 800px;
            overflow-y: auto;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 3px solid #3f3f5e;
            border-top: 3px solid #60a5fa;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #fca5a5;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid #fbbf24;
            color: #fcd34d;
            padding: 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>STRATEGIC PARTNER SCOUT</h1>
            <p class="version">V5.1 FINAL | LOGIC FIREBOX EDITION</p>
        </header>

        <div class="input-section">
            <div class="input-group">
                <label>Anchor Company URL</label>
                <input type="url" id="anchorUrl" placeholder="https://www.circle.com/en/usdc">
            </div>

            <div class="input-group">
                <label>Prospect Company URL</label>
                <input type="url" id="prospectUrl" placeholder="https://www.jpmorgan.com/insights/payments/blockchain">
            </div>

            <div class="input-group">
                <label>Strategic Context (Optional)</label>
                <textarea id="context" placeholder="Recent milestone, deal announcement, or market event..."></textarea>
            </div>

            <div class="input-group">
                <label>Reality Tier</label>
                <div class="tier-grid">
                    <div class="tier-option" onclick="selectTier('rwa')">
                        <input type="radio" name="tier" value="rwa" id="tier-rwa">
                        <div class="tier-name">[Institutional RWA/Yield]</div>
                        <div class="tier-desc">Finance, Stablecoins, Custody, Settlement</div>
                    </div>
                    <div class="tier-option" onclick="selectTier('compute')">
                        <input type="radio" name="tier" value="compute" id="tier-compute">
                        <div class="tier-name">[Sovereign AI/Compute]</div>
                        <div class="tier-desc">Data Centers, Chips, Energy, Infrastructure</div>
                    </div>
                    <div class="tier-option" onclick="selectTier('deeptech')">
                        <input type="radio" name="tier" value="deeptech" id="tier-deeptech">
                        <div class="tier-name">[Orbital/Deep Tech]</div>
                        <div class="tier-desc">Space, Biotech, Fusion, Advanced R&D</div>
                    </div>
                    <div class="tier-option" onclick="selectTier('prestige')">
                        <input type="radio" name="tier" value="prestige" id="tier-prestige">
                        <div class="tier-name">[High-Touch/Prestige]</div>
                        <div class="tier-desc">Luxury, Heritage, Craftsmanship</div>
                    </div>
                </div>
            </div>

            <button onclick="analyzePartnership()" id="analyzeBtn">
                Launch Strategic Analysis
            </button>
        </div>

        <div class="output-section" id="outputSection">
            <h2 style="margin-bottom: 20px; color: #60a5fa;">PARTNERSHIP ASSESSMENT</h2>
            <div class="output-content" id="outputContent"></div>
        </div>
    </div>

    <script>
        let selectedTier = null;

        function selectTier(tier) {
            document.querySelectorAll('.tier-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            document.getElementById(`tier-${tier}`).checked = true;
            selectedTier = tier;
        }

        function extractCompanyName(url) {
            try {
                const urlObj = new URL(url);
                let domain = urlObj.hostname.replace('www.', '');
                let companyName = domain.split('.')[0];
                // Capitalize first letter
                return companyName.charAt(0).toUpperCase() + companyName.slice(1);
            } catch {
                return 'Company';
            }
        }

        function getTierDescription(tier) {
            const descriptions = {
                'rwa': 'Institutional RWA/Yield (Finance/Stablecoins/Custody)',
                'compute': 'Sovereign AI/Compute (Data Centers/Chips/Energy)',
                'deeptech': 'Orbital/Deep Tech (Space/Biotech/Fusion)',
                'prestige': 'High-Touch/Prestige (Luxury/Heritage)'
            };
            return descriptions[tier] || 'Unknown';
        }

        async function analyzePartnership() {
            const anchorUrl = document.getElementById('anchorUrl').value.trim();
            const prospectUrl = document.getElementById('prospectUrl').value.trim();
            const context = document.getElementById('context').value.trim();

            if (!anchorUrl || !prospectUrl) {
                alert('Please provide both company URLs');
                return;
            }

            if (!selectedTier) {
                alert('Please select a Reality Tier');
                return;
            }

            const anchorName = extractCompanyName(anchorUrl);
            const prospectName = extractCompanyName(prospectUrl);

            const btn = document.getElementById('analyzeBtn');
            const outputSection = document.getElementById('outputSection');
            const outputContent = document.getElementById('outputContent');

            btn.disabled = true;
            btn.textContent = 'Analyzing Partnership...';
            outputSection.classList.add('visible');
            outputContent.innerHTML = '<div class="loading"><div class="spinner"></div><p>Running Strategic Analysis...</p></div>';

            const systemPrompt = `## SYSTEM INSTRUCTIONS: STRATEGIC PARTNER SCOUT (V5.1 FINAL)

1. HARD-ISOLATION & MEMORY PURGE
You are a Senior Strategy Partner. Every search is a "Clean Room." You are strictly prohibited from carrying over metrics, names, or industry logic from previous cases. Reset your logic gates for every new pair.

2. THE REALITY CHECK (MANDATORY)
Before writing, identify the primary Reality Tier based on the Anchor. Use this to lock the reasoning engine:

[Institutional RWA/Yield] (Finance/Stablecoins/Custody): Logic focuses on APY, KYC, Settlement Rails (T+0/T+1), and Counterparty Risk. (Prohibited: GPU/Power/Space talk).

[Sovereign AI/Compute] (Data Centers/Chips/Energy): Logic focuses on MW Capacity, PUE, Liquid Cooling, and Interconnection Queues. (Prohibited: APY/Yield/Heritage talk).

[Orbital/Deep Tech] (Space/Biotech/Fusion): Logic focuses on Delta-V, Mass Budgets, Reentry, and Payloads. (Prohibited: Bank/AOV talk).

[High-Touch/Prestige] (Luxury/Heritage): Logic focuses on Scarcity, Craftsmanship, AOV, and Supply Chain Integrity. (Prohibited: API/GPU/Yield talk).

3. THE VARIABLE EXTRACTION PATCH
NAME RULE: Never use the placeholder "Www". If the company name is missing from the title, extract the primary domain (e.g., applieddigital.com becomes Applied Digital).
IDENTITY FENCE: Ensure the report headers explicitly match the specific entities in the current URLs.

4. THE STRATEGIC 'GORGE' EFFECT
Identify the one structural arbitrage only these two own (e.g., 'Microsoft's 20-year commitment de-risks the $1.6B restart cost for Constellation'). Avoid "marketing" or "pilots." Focus on P&L ownership.

5. VETTING FIREWALL
Ask "Gritty" questions specific to the tier. If [Finance], ask about Redemption Stress Tests. If [Compute], ask about Utility Lead Times.

You must follow these rules exactly and produce a comprehensive strategic analysis.`;

            const userPrompt = `Analyze this partnership under the [${getTierDescription(selectedTier)}] Reality Tier:

Anchor: ${anchorName} — ${anchorUrl}
Prospect: ${prospectName} — ${prospectUrl}

${context ? `Strategic Context: ${context}` : ''}

Instructions:
1. Identify the Structural Handshake (the core operational unlock between these two companies).
2. Map the Arbitrage Hunter opportunity (the specific economic advantage).
3. Ask Executive Vetting questions focused on the tier-specific risks.
4. Identify the Structural Gorge (the asymmetric advantage only THESE TWO can create together).
5. Follow all prohibition rules for this Reality Tier.

Provide a comprehensive strategic assessment formatted as a professional report.`;

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 8000,
                        system: systemPrompt,
                        messages: [
                            { role: 'user', content: userPrompt }
                        ]
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                const analysisText = data.content
                    .filter(item => item.type === 'text')
                    .map(item => item.text)
                    .join('\n\n');

                outputContent.innerHTML = `<pre style="margin: 0; font-family: inherit; white-space: pre-wrap;">${escapeHtml(analysisText)}</pre>`;

            } catch (error) {
                outputContent.innerHTML = `<div class="error"><strong>Analysis Failed</strong><br>${escapeHtml(error.message)}</div>`;
            } finally {
                btn.disabled = false;
                btn.textContent = 'Launch Strategic Analysis';
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Auto-select RWA tier on load
        window.addEventListener('DOMContentLoaded', () => {
            selectTier('rwa');
            document.querySelector('.tier-option').click();
        });
    </script>
</body>
</html>
